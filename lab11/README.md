# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 11: –ê–Ω–∞–ª–∏–∑ –≤–∞–ª—é—Ç–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞

<div align="center">
  <img src="https://img.shields.io/badge/Python-3.10%2B-blue?logo=python" alt="Python Version">
  <img src="https://img.shields.io/badge/–¶–ë%20–†–§-XML%20API-green?logo=ruble" alt="CBR API">
</div>

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
```python
# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç—ã
CURRENCIES = {
    'USD': '–î–æ–ª–ª–∞—Ä –°–®–ê',
    'EUR': '–ï–≤—Ä–æ', 
    'CNY': '–ö–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å',
    'JPY': '–Ø–ø–æ–Ω—Å–∫–∞—è –∏–µ–Ω–∞',
    'TRY': '–¢—É—Ä–µ—Ü–∫–∞—è –ª–∏—Ä–∞',
    'KZT': '–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏–π —Ç–µ–Ω–≥–µ'
}
```
- –í—ã–±–æ—Ä –∏–∑ 6 –≤–∞–ª—é—Ç (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤ 3 —Ä–∞–∑–∞)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –¥–∞—Ç—ã
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏–∫–∏ –∫—É—Ä—Å–∞ —Å –≥—Ä–∞—Ñ–∏–∫–æ–º

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
```python
# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
plt.plot(dates, rates, marker='o')
plt.savefig('chart.png')
bot.send_photo(message.chat.id, photo)
```
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –ø–æ—Ä—è–¥–∫–∞ –¥–∞—Ç
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
- –†–∞—Å—á–µ—Ç –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—É—Ä—Å–∞

## üõ†Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
```mermaid
graph TD
  A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> B(–í—ã–±–æ—Ä –≤–∞–ª—é—Ç—ã)
  B --> C[–í–≤–æ–¥ –¥–∞—Ç]
  C --> D{–í–∞–ª–∏–¥–∞—Ü–∏—è}
  D -->|OK| E[–ó–∞–ø—Ä–æ—Å –∫ API –¶–ë]
  E --> F[–ü–∞—Ä—Å–∏–Ω–≥ XML]
  F --> G[–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞]
  G --> H[–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞]
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã —Å XML
```python
def get_rate_by_date(char_code, date_obj):
    response = requests.get(url)  # –ó–∞–ø—Ä–æ—Å –∫ API –¶–ë
    dom = xml.dom.minidom.parseString(response.text)
    dom.normalize()  # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è DOM-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    
    for valute in dom.getElementsByTagName('Valute'):
        if valute.getElementsByTagName('CharCode')[0].firstChild.data == char_code:
            return process_valute_data(valute)
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞
```python
try:
    start_date = datetime.strptime(start_str, '%d.%m.%Y')
    end_date = datetime.strptime(end_str, '%d.%m.%Y')
    if (end_date - start_date).days > 30:
        raise ValueError("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª - 30 –¥–Ω–µ–π")
except ValueError as e:
    bot.reply_error(str(e))
```

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install pyTelegramBotAPI requests matplotlib python-dotenv
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```python
# config.py
TOKEN = '–í–ê–®_TELEGRAM_TOKEN'
```

3. –ü—Ä–∏–º–µ—Ä —Å–µ—Å—Å–∏–∏:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /start
–ë–æ—Ç: –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É [–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å 6 –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏]

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –î–æ–ª–ª–∞—Ä –°–®–ê
–ë–æ—Ç: –í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è (–î–î.–ú–ú.–ì–ì–ì–ì)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: 01.04.2025 10.04.2025
–ë–æ—Ç: [–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥—Ä–∞—Ñ–∏–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É]
```


## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–∞
–ü–∞—Ä–∞–º–µ—Ç—Ä          | –ó–Ω–∞—á–µ–Ω–∏–µ
------------------|---------
–°—Ç—Ä–æ–∫ –∫–æ–¥–∞        | 89
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç | 6
–ú–∞–∫—Å. –ø–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞ | 30 –¥–Ω–µ–π
